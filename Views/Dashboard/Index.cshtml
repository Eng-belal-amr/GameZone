@{
    ViewData["Title"] = "Dashboard";
}

<div class="container my-4">
    <h2 class="mb-4">
        <i class="bi bi-speedometer2"></i> Dashboard
    </h2>

    <div class="row g-4">
        <!-- Games Card -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0 p-4 text-center rounded-4 hover-shadow">
                <i class="bi bi-joystick fs-1 text-primary"></i>
                <h4 class="mt-2">Total Games</h4>
                <h2 class="fw-bold">@ViewBag.TotalGames</h2>
            </div>
        </div>

        <!-- Categories Card -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0 p-4 text-center rounded-4 hover-shadow">
                <i class="bi bi-tags fs-1 text-success"></i>
                <h4 class="mt-2">Total Categories</h4>
                <h2 class="fw-bold">@ViewBag.TotalCategories</h2>
            </div>
        </div>

        <!-- Devices Card -->
        <div class="col-md-4">
            <div class="card shadow-sm border-0 p-4 text-center rounded-4 hover-shadow">
                <i class="bi bi-pc-display fs-1 text-warning"></i>
                <h4 class="mt-2">Total Devices</h4>
                <h2 class="fw-bold">@ViewBag.TotalDevices</h2>
            </div>
        </div>
    </div>

    <!-- Chart -->
    <div class="card shadow-sm border-0 p-4 mt-5 rounded-4">
        <h5 class="mb-3"><i class="bi bi-bar-chart"></i> Games by Category</h5>
        <canvas id="gamesChart"></canvas>
    </div>
</div>

<style>
.hover-shadow:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
}
</style>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const ctx = document.getElementById('gamesChart');

        fetch('/api/dashboard/games-by-category')
            .then(response => response.json())
            .then(data => {
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: data.labels,
                        datasets: [{
                            label: 'Games Count',
                            data: data.values,
                            backgroundColor: [
                                '#0d6efd', '#198754', '#ffc107', '#dc3545', '#6f42c1',
                                '#0dcaf0', '#fd7e14', '#6c757d'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: false },
                            tooltip: { mode: 'index', intersect: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: { stepSize: 1 }
                            }
                        }
                    }
                });
            });
    </script>
}
